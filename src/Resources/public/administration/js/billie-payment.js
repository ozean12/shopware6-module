(this.webpackJsonp=this.webpackJsonp||[]).push([["billie-payment"],{"4lSF":function(e,n){e.exports='{% block billie_test_credentials_button %}\n    <div class="billie-test-credentials-button">\n        {% block billie_test_credentials_button_process_button %}\n            <sw-button-process\n                class="billie-test-credentials-button__process-button"\n                :isLoading="isLoading"\n                :processSuccess="isTestSuccessful"\n                :disabled="isLoading"\n                @click.prevent="onClick"\n                @process-finish="onTestFinish"\n                block>\n                {{ $tc(\'billie.config.testCredentialsButton.text\') }}\n            </sw-button-process>\n        {% endblock %}\n    </div>\n{% endblock %}\n'},AgdC:function(e,n){e.exports='{% block sw_settings_payment_detail_content_card %}\n    {% parent %}\n\n    {% block billie_payment_config_content %}\n        <sw-card v-if="paymentMethod && paymentMethod.extensions.billieConfig != null"\n                 class="billie--payment-config--card"\n                 :title="$tc(\'billie.paymentConfig.card.title\')"\n                 :isLoading="isLoading">\n            <template v-if="!isLoading">\n\n                {% block billie_payment_config_fields %}\n                    <sw-field\n                        type="number"\n                        :label="$tc(\'billie.paymentConfig.fields.duration.label\')"\n                        v-model="paymentMethod.extensions.billieConfig.duration"\n                        min="1">\n                    </sw-field>\n                {% endblock %}\n            </template>\n        </sw-card>\n    {% endblock %}\n{% endblock %}\n'},MqXL:function(e,n){const{Component:t}=Shopware;t.override("sw-order-state-history-card",{})},Qvyn:function(e,n,t){"use strict";t.r(n);const i=Shopware.Classes.ApiService;class s extends i{constructor(e,n,t="billie"){super(e,n,t),this.name="billieApiService"}testCredentials(e,n,t){return this.httpClient.post(`${this.getApiBasePath()}/test-credentials`,{id:e,secret:n,isSandbox:t},{headers:this.getBasicHeaders()}).then(e=>i.handleResponse(e))}}Shopware.Application.addServiceProvider("billieApiService",()=>{const e=Shopware.Application.getContainer("factory"),n=Shopware.Application.getContainer("init"),t=e.apiService,i=new s(n.httpClient,Shopware.Service("loginService")),l=i.name;return t.register(l,i),i});var l=t("AgdC"),o=t.n(l);const{Component:r}=Shopware;r.override("sw-settings-payment-detail",{template:o.a});var a=t("xgdm"),c=t.n(a);const{Component:d}=Shopware;d.override("sw-order-detail-base",{template:c.a,inject:["acl"]});t("MqXL");var p=t("4lSF"),b=t.n(p),f=t("dYE1"),g=t("Z4r5");const{Component:h,Mixin:u}=Shopware;h.register("billie-test-credentials-button",{template:b.a,inject:["billieApiService"],mixins:[u.getByName("notification")],snippets:{"de-DE":f,"en-GB":g},data:()=>({isLoading:!1,isTestSuccessful:!1,currentConfig:null}),created(){this.createdComponent()},destroyed(){this.destroyedComponent()},methods:{createdComponent(){this.$parent.$parent.$parent.$on("config-changed",this.onConfigChanged)},destroyedComponent(){this.$parent.$parent.$parent.$off("config-changed")},onConfigChanged(e){this.currentConfig=e},onClick(){this.testCredentials()},onTestFinish(){this.isTestSuccessful=!1},testCredentials(){this.isTestSuccessful=!1,this.isLoading=!0;let e=this.currentConfig?this.currentConfig["BilliePayment.config.clientId"]:null,n=this.currentConfig?this.currentConfig["BilliePayment.config.clientSecret"]:null,t=this.currentConfig?this.currentConfig["BilliePayment.config.sandbox"]:null;this.billieApiService.testCredentials(e,n,t).then(e=>{this.isLoading=!1,e.success?(this.isTestSuccessful=!0,this.createNotificationSuccess({message:this.$tc("billie.config.notification.correctCredentials")})):this.createNotificationError({message:this.$tc("billie.config.notification.incorrectCredentials")})}).catch(()=>{this.isLoading=!1,this.createNotificationError({message:this.$tc("billie.config.notification.failedToTestCredentials")})})}}})},Z4r5:function(e){e.exports=JSON.parse('{"billie":{"config":{"testCredentialsButton":{"text":"Test credentials"},"notification":{"correctCredentials":"The credentials are correct!","incorrectCredentials":"The credentials are unfortunately wrong!","failedToTestCredentials":"An error occurred while checking the credentials!"}}}}')},dYE1:function(e){e.exports=JSON.parse('{"billie":{"config":{"testCredentialsButton":{"text":"Zugangsdaten testen"},"notification":{"correctCredentials":"Die Zugangsdaten sind korrekt!","incorrectCredentials":"Die Zugangsdaten sind leider falsch!","failedToTestCredentials":"Beim Pr√ºfen der Zugangsdaten ist ein Fehler aufgetreten!"}}}}')},xgdm:function(e,n){e.exports='{% block sw_order_detail_base_custom_fields %}\n\n    {% block billie_payment_order_data %}\n        <sw-card :title="$tc(\'billie.orderData.cart.title\')"\n                 v-if="order.extensions.billieData"\n                 :isLoading="isLoading">\n\n            <sw-field\n                type="text"\n                :label="$tc(\'billie.orderData.fields.referenceId.label\')"\n                v-model="order.extensions.billieData.referenceId"\n                disabled="disabled">\n            </sw-field>\n\n            <sw-field\n                type="text"\n                :label="$tc(\'billie.orderData.fields.externalInvoiceNumber.label\')"\n                v-model="order.extensions.billieData.externalInvoiceNumber"\n                :disabled="!isEditing || !acl.can(\'order.editor\')">\n            </sw-field>\n\n            <sw-field\n                type="text"\n                :label="$tc(\'billie.orderData.fields.externalInvoiceUrl.label\')"\n                v-model="order.extensions.billieData.externalInvoiceUrl"\n                :disabled="!isEditing || !acl.can(\'order.editor\')">\n            </sw-field>\n\n             <sw-field\n                type="text"\n                :label="$tc(\'billie.orderData.fields.externalDeliveryNoteUrl.label\')"\n                v-model="order.extensions.billieData.externalDeliveryNoteUrl"\n                :disabled="!isEditing || !acl.can(\'order.editor\')">\n             </sw-field>\n\n        </sw-card>\n\n    {% endblock %}\n\n    {% parent %}\n{% endblock %}\n'}},[["Qvyn","runtime"]]]);