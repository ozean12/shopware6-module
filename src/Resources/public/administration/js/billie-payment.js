(this.webpackJsonp=this.webpackJsonp||[]).push([["billie-payment"],{"4Zt5":function(e,n,i){},"4lSF":function(e,n){e.exports='{% block billie_test_credentials_button %}\n    <div class="billie-test-credentials-button">\n        {% block billie_test_credentials_button_process_button %}\n            <sw-button-process\n                class="billie-test-credentials-button__process-button"\n                :isLoading="isLoading"\n                :processSuccess="isTestSuccessful"\n                :disabled="isLoading"\n                @click.prevent="onClick"\n                @process-finish="onTestFinish"\n                block>\n                {{ $tc(\'billie.config.testCredentialsButton.text\') }}\n            </sw-button-process>\n        {% endblock %}\n    </div>\n{% endblock %}\n'},AgdC:function(e,n){e.exports='{% block sw_settings_payment_detail_content_card %}\n    {% parent %}\n\n    {% block billie_payment_config_content %}\n        <sw-card v-if="paymentMethod && paymentMethod.extensions.billieConfig != null"\n                 class="billie--payment-config--card"\n                 :title="$tc(\'billie.paymentConfig.card.title\')"\n                 :isLoading="isLoading">\n            <template v-if="!isLoading">\n\n                {% block billie_payment_config_fields %}\n                    <sw-field\n                        type="number"\n                        :label="$tc(\'billie.paymentConfig.fields.duration.label\')"\n                        v-model="paymentMethod.extensions.billieConfig.duration"\n                        min="1">\n                    </sw-field>\n                {% endblock %}\n            </template>\n        </sw-card>\n    {% endblock %}\n{% endblock %}\n'},HgaH:function(e,n,i){var t=i("4Zt5");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,i("SZ7m").default)("5765b3f6",t,!0,{})},MqXL:function(e,n){const{Component:i}=Shopware;i.override("sw-order-state-history-card",{methods:{createStateChangeErrorNotification(e){if(e.response&&e.response.data&&e.response.data.errors){"BILLIE__INVOICE_NUMBER_MISSING"===e.response.data.errors.pop().code?this.createNotificationError({message:this.$tc("billie.transition.errors.invoiceNumberMissing")}):this.$super("createStateChangeErrorNotification",e)}else this.$super("createStateChangeErrorNotification",e)}}})},Qvyn:function(e,n,i){"use strict";i.r(n);const t=Shopware.Classes.ApiService;class s extends t{constructor(e,n,i="billie"){super(e,n,i),this.name="billieApiService"}testCredentials(e,n,i){return this.httpClient.post(this.getApiBasePath()+"/test-credentials",{id:e,secret:n,isSandbox:i},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}}Shopware.Application.addServiceProvider("billieApiService",()=>{const e=Shopware.Application.getContainer("factory"),n=Shopware.Application.getContainer("init"),i=e.apiService,t=new s(n.httpClient,Shopware.Service("loginService")),r=t.name;return i.register(r,t),t});var r=i("AgdC"),l=i.n(r);const{Component:o}=Shopware;o.override("sw-settings-payment-detail",{template:l.a});var a=i("xgdm"),d=i.n(a);i("HgaH");const{Component:c}=Shopware;c.override("sw-order-detail-base",{template:d.a,inject:["acl"]});i("MqXL");var p=i("4lSF"),f=i.n(p),b=i("dYE1"),u=i("Z4r5");const{Component:g,Mixin:h}=Shopware;g.register("billie-test-credentials-button",{template:f.a,inject:["billieApiService"],mixins:[h.getByName("notification")],snippets:{"de-DE":b,"en-GB":u},data:()=>({isLoading:!1,isTestSuccessful:!1,currentConfig:null}),created(){this.createdComponent()},destroyed(){this.destroyedComponent()},methods:{createdComponent(){this.$parent.$parent.$parent.$on("config-changed",this.onConfigChanged)},destroyedComponent(){this.$parent.$parent.$parent.$off("config-changed")},onConfigChanged(e){this.currentConfig=e},onClick(){this.testCredentials()},onTestFinish(){this.isTestSuccessful=!1},testCredentials(){this.isTestSuccessful=!1,this.isLoading=!0;let e=this.currentConfig?this.currentConfig["BilliePayment.config.clientId"]:null,n=this.currentConfig?this.currentConfig["BilliePayment.config.clientSecret"]:null,i=this.currentConfig?this.currentConfig["BilliePayment.config.sandbox"]:null;this.billieApiService.testCredentials(e,n,i).then(e=>{this.isLoading=!1,e.success?(this.isTestSuccessful=!0,this.createNotificationSuccess({message:this.$tc("billie.config.notification.correctCredentials")})):this.createNotificationError({message:this.$tc("billie.config.notification.incorrectCredentials")})}).catch(()=>{this.isLoading=!1,this.createNotificationError({message:this.$tc("billie.config.notification.failedToTestCredentials")})})}}})},Z4r5:function(e){e.exports=JSON.parse('{"billie":{"config":{"testCredentialsButton":{"text":"Test credentials"},"notification":{"correctCredentials":"The credentials are correct!","incorrectCredentials":"The credentials are unfortunately wrong!","failedToTestCredentials":"An error occurred while checking the credentials!"}}}}')},dYE1:function(e){e.exports=JSON.parse('{"billie":{"config":{"testCredentialsButton":{"text":"Zugangsdaten testen"},"notification":{"correctCredentials":"Die Zugangsdaten sind korrekt!","incorrectCredentials":"Die Zugangsdaten sind leider falsch!","failedToTestCredentials":"Beim Pr√ºfen der Zugangsdaten ist ein Fehler aufgetreten!"}}}}')},xgdm:function(e,n){e.exports='{% block sw_order_detail_base_custom_fields %}\n\n    {% block billie_payment_order_data %}\n        <sw-card class="billie-payment-order-data-card"\n                 :title="$tc(\'billie.orderData.cart.title\')"\n                 v-if="order.extensions.billieData"\n                 :isLoading="isLoading">\n\n            <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="30px 30px">\n\n                <sw-description-list columns="1fr" grid="1fr">\n                    <dt>{{ $tc(\'billie.orderData.fields.referenceId.label\') }}</dt>\n                    <dd>\n                        {{ order.extensions.billieData.referenceId }}\n                    </dd>\n                </sw-description-list>\n\n                <sw-description-list columns="1fr" grid="1fr">\n                    <dt>{{ $tc(\'billie.orderData.fields.externalInvoiceNumber.label\') }}</dt>\n                    <dd>\n                        <sw-order-inline-field v-model="order.extensions.billieData.externalInvoiceNumber"\n                                               :displayValue="order.extensions.billieData.externalInvoiceNumber ? order.extensions.billieData.externalInvoiceNumber : \'-\'"\n                                               :value="order.extensions.billieData.externalInvoiceNumber"\n                                               :editable="isEditing"\n                                               @input="saveAndReload"\n                                               class="sw-order-inline-field__truncateable">\n                        </sw-order-inline-field>\n                    </dd>\n                </sw-description-list>\n\n                <sw-description-list columns="1fr" grid="1fr">\n                    <dt>{{ $tc(\'billie.orderData.fields.externalInvoiceUrl.label\') }}</dt>\n                    <dd>\n                        <sw-order-inline-field v-model="order.extensions.billieData.externalInvoiceUrl"\n                                               :displayValue="order.extensions.billieData.externalInvoiceUrl ? order.extensions.billieData.externalInvoiceUrl : \'-\'"\n                                               :value="order.extensions.billieData.externalInvoiceUrl"\n                                               :editable="isEditing"\n                                               @input="saveAndReload"\n                                               class="sw-order-inline-field__truncateable">\n                        </sw-order-inline-field>\n                    </dd>\n                </sw-description-list>\n\n                <sw-description-list columns="1fr" grid="1fr">\n                    <dt>{{ $tc(\'billie.orderData.fields.externalDeliveryNoteUrl.label\') }}</dt>\n                    <dd>\n                        <sw-order-inline-field v-model="order.extensions.billieData.externalDeliveryNoteUrl"\n                                               :displayValue="order.extensions.billieData.externalDeliveryNoteUrl ? order.extensions.billieData.externalDeliveryNoteUrl : \'-\'"\n                                               :value="order.extensions.billieData.externalDeliveryNoteUrl"\n                                               :editable="isEditing"\n                                               @input="saveAndReload"\n                                               class="sw-order-inline-field__truncateable">\n                        </sw-order-inline-field>\n                    </dd>\n                </sw-description-list>\n\n            </sw-container>\n\n        </sw-card>\n\n    {% endblock %}\n\n    {% parent %}\n{% endblock %}\n'}},[["Qvyn","runtime","vendors-node"]]]);