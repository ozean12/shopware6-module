(window.webpackJsonp=window.webpackJsonp||[]).push([["billie-payment-s-w6"],{Rsrk:function(e,t,i){"use strict";i.r(t);var s,n,o,r=i("FGIj"),a=i("k8s9");class c extends r.a{init(){this._insertWidget(),this._registerEvents()}_registerEvents(){this.el.form.addEventListener("beforeSubmit",this._submitForm.bind(this))}_submitForm(e){if(this._isAddressConfirmed())return!0;e.preventDefault(),BillieCheckoutWidget.mount({billie_config_data:{session_id:this.options.checkoutSessionId,merchant_name:this.options.merchantName},billie_order_data:this.options.checkoutData}).then((e=>{const t=new a.a(window.accessKey,window.contextToken);let i="/billie-payment/update-addresses",s=window.location.href.match(/account\/order\/edit\/([A-Za-z0-9]+)/);s&&2===s.length&&(i+="/"+s[1]),"csrf"in window&&window.csrf.enabled&&"twig"===window.csrf.mode&&(e._csrf_token=this.options.csrfToken),t.post(i,JSON.stringify(e),(e=>{this._setAddressConfirmed(!0),this.el.value=this.options.checkoutSessionId,this.el.form.submit()}))})).catch((t=>{e.preventDefault(),console.error("Error occurred",t),window.location.reload()}))}_insertWidget(){var e,t,i,s,n,o,r;window.billiePaymentData=this.options.checkoutData,e=window,t=document,i="script",s="bcw",n=this.options.src,e.BillieCheckoutWidget=s,e[s]=e[s]||function(){(e[s].q=e[s].q||[]).push(arguments)},e.billieSrc=n,o=t.createElement(i),r=t.getElementsByTagName(i)[0],o.id=s,o.src=n,o.charset="utf-8",o.async=1,r.parentNode.insertBefore(o,r),bcw("init")}_setAddressConfirmed(e){this.el.form.dataset.billieConfirmed=parseInt(e)}_isAddressConfirmed(){return 1===parseInt(this.el.form.dataset.billieConfirmed)}}o={src:null,checkoutSessionId:null,merchantName:null,checkoutData:null,csrfToken:""},(n="options")in(s=c)?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o;const d=window.PluginManager;"BillieCheckout"in d.getPluginList()||d.register("BillieCheckout",c,'[data-billie-checkout="true"]')}},[["Rsrk","runtime","vendor-node","vendor-shared"]]]);